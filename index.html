<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>حجوزات صالون</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="manifest" href="manifest.json">
</head>
<body>
  <header>
    <h1>حجوزات صالون</h1>
    <button id="installBtn" hidden>تثبيت التطبيق</button>
  </header>

  <main>
    <section class="two-col">
      <div class="card" id="bookingCard">
        <h2>احجز موعد</h2>
        <label>العميل
          <input id="clientName" placeholder="اسم العميل" />
        </label>
        <label>الهاتف
          <input id="clientPhone" placeholder="رقم الجوال" inputmode="tel" />
        </label>
        <label>الخدمة
          <select id="serviceSelect"></select>
        </label>
        <label>الحلاق
          <select id="barberSelect"></select>
        </label>
        <label>التاريخ و الوقت
          <input id="datetime" type="datetime-local" />
        </label>
        <button id="bookBtn">حجز</button>
        <p id="bookMsg" class="muted"></p>
      </div>

      <div class="card" id="adminCard">
        <h2>لوحة المدير</h2>
        <label>PIN دخول الإدارة
          <input id="adminPin" type="password" placeholder="كود" />
        </label>
        <button id="openAdmin">دخول</button>
        <div id="adminArea" hidden>
          <h3>الحلاقين</h3>
          <div class="inline">
            <input id="newBarberName" placeholder="اسم الحلاق" />
            <button id="addBarber">أضف</button>
          </div>
          <ul id="barberList"></ul>

          <h3>الخدمات</h3>
          <div class="inline">
            <input id="newServiceName" placeholder="اسم الخدمة" />
            <input id="newServiceDuration" placeholder="مدة (دقائق)" type="number" />
            <input id="newServicePrice" placeholder="السعر" type="number" />
            <button id="addService">أضف</button>
          </div>
          <ul id="serviceList"></ul>

          <h3>المواعيد</h3>
          <ul id="appointmentsList"></ul>

          <div class="admin-actions">
            <button id="exportCSV">تصدير CSV</button>
            <button id="clearAll">مسح كل البيانات المحلية</button>
          </div>
        </div>
      </div>
    </section>

    <section class="card" id="myBookings">
      <h2>مواعيدي / المواعيد القادمة</h2>
      <ul id="myAppointments"></ul>
    </section>
  </main>

  <footer>
    <small>صيغة تجريبية — للحجز الفعلي يوصى بنسخة سيرفرية للاعتمادية.</small>
  </footer>

  <script src="app.js"></script>
  <script>
  if('serviceWorker' in navigator){
    navigator.serviceWorker.register('sw.js').catch(()=>{});
  }
  </script>
</body>
</html>
